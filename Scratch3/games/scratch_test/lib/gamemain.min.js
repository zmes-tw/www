!function(){function resize_canvas(){_winW=$(window).width(),_winH=$(window).height(),now_sc=_winW/_winH,set_sc=16/9,scale=now_sc<=set_sc?_winW/1280:_winH/720,_w=1280*scale,_h=720*scale,$("#wrapper").css("width",_w),$("#wrapper").css("height",_h),$("#preload").css("width",_w),$("#preload").css("height",_h),$("#robot")&&$("#robot").css("transform","translate(-50%,-50%) scale("+1.4*scale+")")}window.onload=function(){var canvas,stage,exportRoot;input_txt=document.getElementById("input_txt"),canvas=document.getElementById("canvas"),preload=document.getElementById("preload"),topic=document.getElementById("topic"),images=images||{};var manifest=[{src:"res/bg.png",id:"bg"},{src:"res/img02.png",id:"img02"},{src:"res/img03.png",id:"img03"},{src:"res/img04.png",id:"img04"},{src:"res/scratch3.jpg",id:"scratch3"},{src:"res/musicbg.mp3",id:"musicbg"},{src:"res/effect01.mp3",id:"effect01"},{src:"res/effect02.mp3",id:"effect02"},{src:"res/mouseoverb.mp3",id:"mouseoverb"},{src:"res/mouseoverq.mp3",id:"mouseoverq"},{src:"res/rightsound.mp3",id:"rightsound"},{src:"res/wrongsound.mp3",id:"wrongsound"}];resize_canvas(),createjs.Sound.registerPlugins([createjs.HTMLAudioPlugin]);var loader=new createjs.LoadQueue(!1);function handleFileLoad(evt){"image"==evt.item.type&&(images[evt.item.id]=evt.result)}function handleComplete(){exportRoot=new lib.game,(stage=new createjs.Stage(canvas)).addChild(exportRoot),stage.update(),stage.enableMouseOver(),resize_canvas(),preload.style.display="none",topic.style.display="block",topic.addEventListener("click",initTopicFn)}function initTopicFn(e){topic.style.display="none",topic.removeEventListener("click",initTopicFn),setTimeout(function(){sound_Channel("effect01")},500);var sou=createjs.Sound._idHash.musicbg;$("body").append('<audio src="'+sou+'" id="musicbg" loop="true" />'),bg00=$("#musicbg").get(0),bg00.play(),createjs.Ticker.setFPS(20),createjs.Ticker.addEventListener("tick",stage)}loader.installPlugin(createjs.Sound),loader.addEventListener("fileload",handleFileLoad),loader.addEventListener("complete",handleComplete),loader.loadManifest(manifest)},$(window).resize(function(){resize_canvas()})}();let mp3Ary=[],mus_bo=!0;function playSound(id,bool,loop){if(bool){for(i=0;i<mp3Ary.length;i++)mp3Ary[i]&&mp3Ary[i].stop();mp3Ary.length=0,mp3Ary=[]}if("stop"!=id&&createjs.Sound.isReady()){var mp3=createjs.Sound.play(id,createjs.Sound.INTERRUPT_EARLY,0,0,loop);mp3Ary.push(mp3)}}function sound_Channel(str){mus_bo&&playSound(str,!1,0)}